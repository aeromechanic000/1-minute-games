<!DOCTYPE html>
<html>
<head>
    <title>P5.js Ping Pong Game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        canvas {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
<script>
let ball = {
    x: 400,
    y: 300,
    size: 15,
    speedX: 5,
    speedY: 5
};

let playerPaddle = {
    x: 50,
    y: 300,
    width: 10,
    height: 100,
    speed: 8,
    score: 0
};

let computerPaddle = {
    x: 750,
    y: 300,
    width: 10,
    height: 100,
    speed: 5,
    score: 0
};

let gameStarted = false;
let startButton, resetButton;

function setup() {
    createCanvas(800, 600);
    
    // Create buttons
    startButton = createButton('Start');
    startButton.position(350, 620);
    startButton.mousePressed(startGame);
    
    resetButton = createButton('Reset');
    resetButton.position(420, 620);
    resetButton.mousePressed(resetGame);
    
    resetGame();
}

function draw() {
    background(255);
    drawCourt();
    drawScores();
    drawPaddles();
    drawBall();
    
    if (gameStarted) {
        moveBall();
        movePlayerPaddle();
        moveComputerPaddle();
        checkCollisions();
    }
}

function drawCourt() {
    // Border
    stroke(0);
    strokeWeight(2);
    noFill();
    rect(0, 0, width, height);
    
    // Center line
    for(let i = 0; i < height; i += 20) {
        line(width/2, i, width/2, i + 10);
    }
}

function drawScores() {
    textSize(32);
    fill(0);
    noStroke();
    text(playerPaddle.score, width/4, 50);
    text(computerPaddle.score, 3*width/4, 50);
}

function drawPaddles() {
    fill(0);
    stroke(255);
    rect(playerPaddle.x, playerPaddle.y, playerPaddle 
.width, playerPaddle.height);
    rect(computerPaddle.x, computerPaddle.y, 
computerPaddle.width, computerPaddle.height);
}

function drawBall() {
    stroke(0);
    fill(255);
    ellipse(ball.x, ball.y, ball.size);
}

function moveBall() {
    ball.x += ball.speedX;
    ball.y += ball.speedY;
}

function movePlayerPaddle() {
    if (keyIsDown(UP_ARROW)) {
        playerPaddle.y = max(0, playerPaddle.y - 
playerPaddle.speed);
    }
    if (keyIsDown(DOWN_ARROW)) {
        playerPaddle.y = min(height - playerPaddle.height, 
playerPaddle.y + playerPaddle.speed);
    }
}

function moveComputerPaddle() {
    let targetY = ball.y - computerPaddle.height/2;
    if (computerPaddle.y < targetY) {
        computerPaddle.y += computerPaddle.speed;
    }
    if (computerPaddle.y > targetY) {
        computerPaddle.y -= computerPaddle.speed;
    }
    
    computerPaddle.y = constrain(computerPaddle.y, 0, 
height - computerPaddle.height);
}

function checkCollisions() {
    // Ball collision with top and bottom walls
    if (ball.y < 0 || ball.y > height) {
        ball.speedY *= -1;
    }
    
    // Ball collision with paddles
    if (ball.x < playerPaddle.x + playerPaddle.width && 
        ball.y > playerPaddle.y && 
        ball.y < playerPaddle.y + playerPaddle.height) {
        ball.speedX *= -1;
        ball.x = playerPaddle.x + playerPaddle.width;
    }
    
    if (ball.x > computerPaddle.x && 
        ball.y > computerPaddle.y && 
        ball.y < computerPaddle.y + computerPaddle.height) {
        ball.speedX *= -1;
        ball.x = computerPaddle.x;
    }
    
    // Scoring
    if (ball.x < 0) {
        computerPaddle.score++;
        resetBall();
    }
    if (ball.x > width) {
        playerPaddle.score++;
        resetBall();
    }
}

function resetBall() {
    ball.x = width/2;
    ball.y = height/2;
    ball.speedX = random([-5, 5]);
    ball.speedY = random(-5, 5);
}

function startGame() {
    gameStarted = true;
}

function resetGame() {
    gameStarted = false;
    playerPaddle.score = 0;
    computerPaddle.score = 0;
    playerPaddle.y = height/2 - playerPaddle.height/2;
    computerPaddle.y = height/2 - computerPaddle.height/2;
    resetBall();
}
</script>
</body>
</html>
